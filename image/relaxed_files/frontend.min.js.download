jQuery((function(a){"use strict";var e=a("body"),t=function(a){(function(a){return a.is(".processing")||a.parents(".processing").length})(a)||a.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})};a(document).on("click",".ywpar-button-message",(function(e){e.preventDefault();var t=a(this);t.hasClass("ywpar-button-percentage-discount")?t.next().find("form").submit():a(".ywpar_apply_discounts_container").slideToggle()})),a(document).on("click","#ywpar_apply_discounts",(function(e){e.preventDefault();var r=a(this),n=a("#ywpar-points-max"),o=n.attr("min"),i=n.val(),c=a(".ywpar_min_reedem_value_error"),s=r.parents("form");if(parseFloat(i)<parseFloat(o))return c.show(),!1;c.css("opacity","0"),a("#ywpar_input_points_check").val(1),yith_ywpar_general.redeem_uses_ajax?function(e){t(a("#yith-par-message-reward-cart"));var r={ywpar_points_max:e.find("input[name=ywpar_points_max]").val(),ywpar_max_discount:e.find("input[name=ywpar_max_discount]").val(),ywpar_rate_method:e.find("input[name=ywpar_rate_method]").val(),ywpar_input_points_nonce:e.find("#ywpar_input_points_nonce").val(),ywpar_input_points:e.find("#ywpar-points-max").val(),ywpar_input_points_check:e.find("#ywpar_input_points_check").val()};a.ajax({type:"POST",url:yith_ywpar_general.wc_ajax_url.toString().replace("%%endpoint%%","ywpar_apply_points"),data:r,dataType:"html",success:function(a){console.log("ywpar_applied")},complete:function(){"cart"===yith_ywpar_general.cart_or_checkout?(a(".woocommerce-cart-form button[name=update_cart]").removeAttr("disabled"),a(".woocommerce-cart-form button[name=update_cart]").click()):a("body").trigger("update_checkout")}})}(s):s.submit()})),a.fn.yith_ywpar_variations=function(e){var t=(e=a(".variations_form:not(.in_loop )")).closest(".product").find(".yith-par-message"),r=e.closest(".product").find(".yith-par-message-variation");t.length||(t=a(".product").find(".yith-par-message"),r=a(".product").find(".yith-par-message-variation")),t.length||(t=a(".yith-par-message"),r=a(".yith-par-message-variation"));var n=r.find(".product_point"),o=r.find(".product-point-conversion");e.on("found_variation",(function(a,e){t.addClass("hide"),r.removeClass("hide"),0==e.variation_points&&r.addClass("hide"),e.variation_points&&n.text(e.variation_points),e.variation_price_discount_fixed_conversion&&o.html(e.variation_price_discount_fixed_conversion)})),e.on("reset_data",(function(){r.addClass("hide"),t.removeClass("hide")})),e.find("select").first().trigger("change")},e.hasClass("single-product")&&a.fn.yith_ywpar_variations(),a(document).on("qv_loader_stop",(function(){a.fn.yith_ywpar_variations()})),a(document.body).on("updated_cart_totals added_to_cart updated_checkout update_shipping_method",(function(e){if("updated_checkout"===e.type||"updated_cart_totals"===e.type){var t=a("#yith-par-message-cart");t.length>0&&a.ajax({url:yith_ywpar_general.wc_ajax_url.toString().replace("%%endpoint%%","ywpar_update_cart_messages")+"&cart_or_checkout="+yith_ywpar_general.cart_or_checkout,type:"POST",success:function(a){""!==a?t.show().html(a):t.hide()}})}else{a(".woocommerce > #yith-par-message-cart").remove(),a(".woocommerce-notices-wrapper > #yith-par-message-cart").length>1&&a(".woocommerce-notices-wrapper > #yith-par-message-cart:last-child").remove()}if("updated_checkout"===e.type||"updated_cart_totals"===e.type){if(0===a("#yith-par-message-reward-cart").length)a(yith_ywpar_general.default_container).after('<div id="yith-par-message-reward-cart" style="display:none" class="woocommerce-cart-notice woocommerce-cart-notice-minimum-amount woocommerce-info"></div>');a(document).find("#yith-par-message-reward-cart").length>0&&a.ajax({url:yith_ywpar_general.wc_ajax_url.toString().replace("%%endpoint%%","ywpar_update_cart_rewards_messages"),type:"POST",beforeSend:function(){},success:function(e){let t=a(document).find("#yith-par-message-reward-cart");t.addClass(yith_ywpar_general.reward_message_type),""!==e.trim()?(t.show().html(e),r()):t.hide()}})}else{a(".woocommerce > #yith-par-message-reward-cart").remove(),a(".woocommerce-notices-wrapper > #yith-par-message-reward-cart").length>1&&a(".woocommerce-notices-wrapper > #yith-par-message-reward-cart:last-child").remove()}}));const r=function(){var e;a(document).on("keyup","#ywpar-points-max",(function(r){clearTimeout(e);var n=a(this);e=setTimeout((function(){let e=n.val();""!==e&&a.isNumeric(e)||(e=0);var r={input_points:e,max_points:a("#yith-par-message-reward-cart input[name=ywpar_points_max], .wp-block-yith-par-message-reward-cart.default-layout input[name=ywpar_points_max]").val(),method:a("#yith-par-message-reward-cart input[name=ywpar_rate_method], .wp-block-yith-par-message-reward-cart.default-layout input[name=ywpar_rate_method]").val(),security:yith_ywpar_general.discount_value_nonce};a.ajax({url:yith_ywpar_general.wc_ajax_url.toString().replace("%%endpoint%%","ywpar_calc_discount_value"),type:"POST",data:r,dataType:"json",beforeSend:function(){t(a("#yith-par-message-reward-cart.default-layout .woocommerce-Price-amount, .wp-block-yith-par-message-reward-cart.default-layout .woocommerce-Price-amount"))},success:function(e){""!==e.to_redeem&&a("#yith-par-message-reward-cart .woocommerce-Price-amount, .wp-block-yith-par-message-reward-cart .woocommerce-Price-amount").html(e.to_redeem)},complete:function(){a("#yith-par-message-reward-cart.default-layout .woocommerce-Price-amount, .wp-block-yith-par-message-reward-cart").removeClass("processing").unblock()}})}),500)}))};a(document).on("wc_fragments_refreshed",(function(){r()})),r(),a('input[name="yith_birthday"]').length>0&&function(){let a=yith_ywpar_general.birthday_date_format.replace("yy","yyyy");new dtsel.DTS('input[name="yith_birthday"]',{dateFormat:a,localization:yith_ywpar_general.datepicker})}(),a(document).on("click",".ywpar_tabs_links",(function(e){var t,r,n,o=a(this).closest("#ywpar_tabs");t=e,r=o,n=a(this).data("target"),r.find(".ywpar_tabcontent").each((function(){a(this).hide()})),r.find(".ywpar_tabs_links").each((function(){a(this).removeClass("active")})),r.find("#"+n).fadeIn("slow"),t.currentTarget.className+=" active"})),a(document).find(".ywpar_tabs_links.active").each((function(){a(this).click()}))}));